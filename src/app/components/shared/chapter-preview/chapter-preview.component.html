<div class="container">
  <div class="row">
    <div class="row">
      <div class="col col-lg-2">
      </div>
      <div class="col-md-auto">

        <mat-card class="material-card previewchapter-card" *ngIf="!isLoading">
          <mat-card-title>
            <b>#{{chapter.index + 1}}</b> {{chapter.title | capitalize:true }}</mat-card-title>
          <mat-card-content>

            <div class="container">
              <!--Chapter content-->
              <div class="row">
                <div class="col">
                  <div class="chapter-content">
                    <markdown-to-html [data]="chapter.content"></markdown-to-html>
                  </div>
                </div>
              </div>
              <!--Chapter info-->
              <div class="row">
                <div class="col-md-6">
                  <mat-list>
                    <mat-list-item class = "user-link" (click)="viewUser()">
                      <mat-icon mat-list-icon>
                        <i class="fa-custom fa fa-user" aria-hidden="true"></i>
                      </mat-icon>
                      <h4 mat-line *ngIf="!user.showNickname && user.name && user.surname">{{user.name}} {{user.surname}}</h4>
                      <h4 mat-line *ngIf="!user.showNickname && !user.name && !user.surname">{{user.email}}</h4>
                      <h4 mat-line *ngIf="user.showNickname && user.nickname">{{user.nickname}}</h4>
                      <h4 mat-line *ngIf="user.showNickname && !user.nickname">{{user.email}}</h4>
                      <p mat-line class="story-description">Author </p>
                    </mat-list-item>
                  </mat-list>
                </div>
                <div class="col-md-6">
                  <mat-list>
                    <mat-list-item>
                      <mat-icon mat-list-icon>
                        <i class="fa-custom fa fa-pencil" aria-hidden="true"></i>
                      </mat-icon>
                      <h4 mat-line *ngIf="story.dateEditing">{{chapter.dateEditing | date}}</h4>
                      <h4 mat-line *ngIf="!story.dateEditing">Last edit unknown</h4>
                      <p mat-line class="story-description">Last edit</p>
                    </mat-list-item>
                  </mat-list>
                </div>
              </div>
            </div>


          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary" type = "button" (click)="backClicked()">Back</button>
            <button mat-button color="primary" type = "button" (click)="editChapter()" *ngIf="isEditPossible">Edit</button>
            <button mat-button color="primary" type = "button" (click)="readChapter()">Read</button>
            <button mat-button color="primary" type = "button" (click)="reportAbuse()" *ngIf="isReportable" class = "abuse">Report an abuse</button>
            <button mat-button color="primary" type="button" (click)="shareOnFacebook()">Share on Facebook</button>
          </mat-card-actions>
        </mat-card>

        <div class="social-summary">
            <social-chapter-summary [story] = "story" [chapter]="chapter"></social-chapter-summary>
        </div>
        <div class="social">
            <social-chapter [chapter] = "chapter"></social-chapter>
        </div>

      </div>
      <div class="col col-lg-2">

      </div>
    </div>
  </div>